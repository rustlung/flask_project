{% extends "layout.html" %}

{% block content %}
  <section class="mb-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="h5 mb-0">Публичные проекты и опыт</h2>
      <small class="text-muted">{{ experiences|length }} записей</small>
    </div>
    <div class="row g-4">
      {% for exp in experiences %}
        <div class="col-md-6">
          <article class="card shadow-sm h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h3 class="h6 mb-0">{{ exp.title }}</h3>
                <span class="badge bg-outline fs-6 text-uppercase text-muted">{{ exp.category }}</span>
              </div>
              <p class="text-muted small">
                {{ exp.start_date }}{% if exp.end_date %} — {{ exp.end_date }}{% else %} — Сейчас{% endif %}
              </p>
              <p class="card-text">{{ exp.description }}</p>
              {% if exp.highlights %}
                <ul class="list-unstyled mb-2">
                  {% for item in exp.highlights %}
                    <li>• {{ item }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
              {% if exp.tags %}
                {% for tag in exp.tags %}
                  <span class="badge rounded-pill bg-secondary me-1">{{ tag }}</span>
                {% endfor %}
              {% endif %}
            </div>
            {% if exp.link %}
              <div class="card-footer bg-white border-top-0">
                <a class="btn btn-sm btn-outline-primary" href="{{ exp.link }}" target="_blank" rel="noreferrer">
                  Перейти
                </a>
              </div>
            {% endif %}
          </article>
        </div>
      {% else %}
        <p class="text-muted">Пока нет доступных записей.</p>
      {% endfor %}
    </div>
  </section>

  <section>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="h5 mb-0">Путь развития</h2>
      <small class="text-muted">{{ timeline|length }} событий</small>
    </div>
    <div class="timeline">
      {% for event in timeline %}
        <div class="timeline-item">
          <div class="timeline-date">{{ event.date }}</div>
          <div class="timeline-body">
            <h3 class="h6 mb-1">{{ event.title }}</h3>
            <p class="mb-2">{{ event.description }}</p>
            {% if event.category %}
              <span class="badge rounded-pill bg-light text-dark">{{ event.category }}</span>
            {% endif %}
            {% if event.highlight %}
              <span class="badge rounded-pill bg-success text-white ms-1">ключевое</span>
            {% endif %}
          </div>
        </div>
      {% else %}
        <p class="text-muted">История ещё не записана.</p>
      {% endfor %}
    </div>
  </section>
{% endblock %}
